AWSTemplateFormatVersion: '2010-09-09'
Description: 'AWS CloudFormation for creating ECS services..'
Parameters:
  Cluster:
    Type: String
  DesiredCount:
    Type: String
  Image:
    Type: String
  Role:
    Type: String
Resources:
  Service:
    Type: AWS::ECS::Service
    Properties:
      Cluster: !Ref Cluster
      DesiredCount: !Ref DesiredCount
      Role: !Ref Role
      TaskDefinition: !Ref TaskDefinition
  TaskDefinition:
    Type: AWS::ECS::TaskDefinition
    Properties:
      Family: Service
      ContainerDefinitions:
      - Name: testingcon
      - Image: !Ref Image
      - Memory: 512
      - Essential: true
      - PortMappings:
        - Protocol: tcp
          ContainerPort: 8080
          HostPort: 8080
